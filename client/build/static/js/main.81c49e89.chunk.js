(this.webpackJsonpclient=this.webpackJsonpclient||[]).push([[0],{109:function(e,a,t){e.exports=t(142)},115:function(e,a,t){},142:function(e,a,t){"use strict";t.r(a);var n=t(0),r=t.n(n),c=t(46),l=t.n(c),o=(t(114),t(115),t(31)),s=t(13),i=t(158),m=t(150),u=t(161),p=t(33),d=t(95),b=t.n(d),f=t(18),v=t(19),E=t(74),g=t.n(E),h=new(function(){function e(){Object(f.a)(this,e)}return Object(v.a)(e,[{key:"login",value:function(e){localStorage.setItem("id_token",e),window.location.assign("/")}},{key:"logout",value:function(){localStorage.removeItem("id_token"),window.location.assign("/")}},{key:"getToken",value:function(){return localStorage.getItem("id_token")}},{key:"getProfile",value:function(){return g()(this.getToken())}},{key:"loggedIn",value:function(){var e=this.getToken();return!!e&&!this.isTokenExpired(e)}},{key:"isTokenExpired",value:function(e){try{return g()(e).exp<Date.now()/1e3}catch(a){return!1}}}]),e}());function k(){var e=Object(n.useState)(""),a=Object(s.a)(e,2),t=a[0],c=a[1],l=function(e){var a=e.target.text;c(a)};return r.a.createElement(i.a,{variant:"dark",className:"d-flex w-100 justify-content-center py-0",id:"navbar"},r.a.createElement(m.a,{className:"navContainer d-flex justify-content-start"},r.a.createElement(i.a.Brand,{as:p.b,to:"/",className:"px-3"},r.a.createElement("img",{alt:"",src:b.a,width:"30",height:"30",className:"d-inline-block align-top"})," ","BeetHub"),r.a.createElement(u.a,null,r.a.createElement(u.a.Link,{as:p.b,to:"/",onClick:l,className:"Home"===t?"selectedNav":""},"Home"),r.a.createElement(u.a.Link,{as:p.b,to:"/search",onClick:l,className:"Search"===t?"selectedNav":""},"Search"),h.loggedIn()?r.a.createElement(r.a.Fragment,null,r.a.createElement(u.a.Link,{as:p.b,to:"/profile",onClick:l,className:"Profile"===t?"selectedNav":""},"Profile"),r.a.createElement(u.a.Link,{to:"/",onClick:function(e){e.preventDefault(),h.logout()}},"Logout")):r.a.createElement(r.a.Fragment,null,r.a.createElement(u.a.Link,{as:p.b,to:"/login",onClick:l,className:"Login"===t?"selectedNav":""},"Login"),r.a.createElement(u.a.Link,{as:p.b,to:"/signup",onClick:l,className:"Sign Up"===t?"selectedNav":""},"Sign Up")))))}var w,y,j=t(24),O=t.n(j),N=t(37),x=t(43),S=t(151),I=t(54),C=t(157),L=Object(C.a)(w||(w=Object(I.a)(["\n     mutation addUser($username: String!, $email: String!, $password: String!) {\n         addUser(username: $username, email: $email, password: $password) {\n             token\n             user {\n                 _id\n                 username\n                 email\n             }\n         }\n     }\n "]))),$=Object(C.a)(y||(y=Object(I.a)(["\n     mutation login($email: String!, $password: String!) {\n         login(email: $email, password: $password) {\n             token\n             user {\n                 _id\n                 username\n                 email\n             }\n         }\n     }\n "]))),_=function(e){var a=Object(n.useState)({email:"",password:""}),t=Object(s.a)(a,2),c=t[0],l=t[1],i=Object(S.a)($),m=Object(s.a)(i,2),u=m[0],p=m[1].error,d=function(e){var a=e.target,t=a.name,n=a.value;l(Object(o.a)(Object(o.a)({},c),{},Object(x.a)({},t,n)))},b=function(){var e=Object(N.a)(O.a.mark((function e(a){var t,n;return O.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a.preventDefault(),e.prev=1,e.next=4,u({variables:Object(o.a)({},c)});case 4:t=e.sent,n=t.data,h.login(n.login.token),e.next=12;break;case 9:e.prev=9,e.t0=e.catch(1),console.error(e.t0);case 12:l({email:"",password:""});case 13:case"end":return e.stop()}}),e,null,[[1,9]])})));return function(a){return e.apply(this,arguments)}}();return r.a.createElement("main",{className:"flex-row justify-center mb-4"},r.a.createElement("div",{className:"col-12 col-md-6"},r.a.createElement("div",{className:"card"},r.a.createElement("h4",{className:"card-header"},"Login"),r.a.createElement("div",{className:"card-body"},r.a.createElement("form",{onSubmit:b},r.a.createElement("input",{className:"form-input",placeholder:"Your email",name:"email",type:"email",id:"email",value:c.email,onChange:d}),r.a.createElement("input",{className:"form-input",placeholder:"******",name:"password",type:"password",id:"password",value:c.password,onChange:d}),r.a.createElement("button",{className:"btn d-block w-100",type:"submit"},"Submit")),p&&r.a.createElement("div",null,"Login failed")))))},T=function(){var e=Object(n.useState)({username:"",email:"",password:""}),a=Object(s.a)(e,2),t=a[0],c=a[1],l=Object(S.a)(L),i=Object(s.a)(l,2),m=i[0],u=i[1].error,p=function(e){var a=e.target,n=a.name,r=a.value;c(Object(o.a)(Object(o.a)({},t),{},Object(x.a)({},n,r)))},d=function(){var e=Object(N.a)(O.a.mark((function e(a){var n,r;return O.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a.preventDefault(),e.prev=1,e.next=4,m({variables:Object(o.a)({},t)});case 4:n=e.sent,r=n.data,h.login(r.addUser.token),e.next=12;break;case 9:e.prev=9,e.t0=e.catch(1),console.error(e.t0);case 12:case"end":return e.stop()}}),e,null,[[1,9]])})));return function(a){return e.apply(this,arguments)}}();return r.a.createElement("main",{className:"flex-row justify-center mb-4"},r.a.createElement("div",{className:"col-12 col-md-6"},r.a.createElement("div",{className:"card"},r.a.createElement("h4",{className:"card-header"},"Sign Up"),r.a.createElement("div",{className:"card-body"},r.a.createElement("form",{onSubmit:d},r.a.createElement("input",{className:"form-input",placeholder:"Your username",name:"username",type:"username",id:"username",value:t.username,onChange:p}),r.a.createElement("input",{className:"form-input",placeholder:"Your email",name:"email",type:"email",id:"email",value:t.email,onChange:p}),r.a.createElement("input",{className:"form-input",placeholder:"******",name:"password",type:"password",id:"password",value:t.password,onChange:p}),r.a.createElement("button",{className:"btn d-block w-100",type:"submit"},"Submit")),u&&r.a.createElement("div",null,"Signup failed")))))},U=t(12),A=t(102),B=t(103),P=t(105),F=t(160),H=t(156);function R(){return r.a.createElement("div",null,"Home")}var D,q=t(153),G=Object(C.a)(D||(D=Object(I.a)(["\n    query {\n        me {\n            _id\n            username\n            email\n            collections {\n                _id\n            }\n            reviews {\n                _id\n            }\n            favorites {\n                _id\n            }\n        }\n    }\n"])));function Y(){var e=Object(q.a)(G),a=e.loading,t=e.data,n=null===t||void 0===t?void 0:t.me;return h.loggedIn()?(console.log(n),r.a.createElement(r.a.Fragment,null,a?r.a.createElement("h1",null,"Loading..."):r.a.createElement("div",null,r.a.createElement("h1",null,"Welcome, ",n.username)))):r.a.createElement(U.a,{to:"/login"})}var J=t(159),K=t(154),X=t(162),z=t(155),M=t(101),W=t(124),Q=function(){var e=Object(N.a)(O.a.mark((function e(a){var t,n;return O.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t={method:"GET",url:"https://spotify23.p.rapidapi.com/search/",params:{q:a,type:"multi",offset:"0",limit:"10",numberOfTopResults:"3"},headers:{"X-RapidAPI-Host":"spotify23.p.rapidapi.com","X-RapidAPI-Key":"API KEY GOES HERE"}},e.prev=1,e.next=4,W.request(t);case 4:return n=e.sent,console.log(n),e.abrupt("return",n);case 9:e.prev=9,e.t0=e.catch(1),console.log(e.t0);case 12:case"end":return e.stop()}}),e,null,[[1,9]])})));return function(a){return e.apply(this,arguments)}}();function V(){var e=Object(n.useState)([]),a=Object(s.a)(e,2),t=a[0],c=a[1],l=Object(n.useState)(""),o=Object(s.a)(l,2),i=o[0],m=o[1],u=function(){var e=Object(N.a)(O.a.mark((function e(a){var t,n,r;return O.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(a.preventDefault(),i){e.next=3;break}return e.abrupt("return",!1);case 3:return e.prev=3,e.next=6,Q(i);case 6:if(t=e.sent){e.next=9;break}throw new Error("something went wrong!");case 9:n=t.data,r=n.albums.items.map((function(e){return{albumURI:e.data.uri,albumId:e.data.uri.split(":")[2],name:e.data.name,artists:e.data.artists||"Artist unknown",cover:e.data.coverArt.sources[0].url||"no cover art",year:e.data.date.year}})),c(r),console.log(r),m(""),e.next=19;break;case 16:e.prev=16,e.t0=e.catch(3),console.error(e.t0);case 19:case"end":return e.stop()}}),e,null,[[3,16]])})));return function(a){return e.apply(this,arguments)}}();return r.a.createElement(r.a.Fragment,null,r.a.createElement(J.a,{className:"form",onSubmit:u},r.a.createElement(J.a.Group,{className:"searchForm mb-3",controlId:"formBasicSearch"},r.a.createElement(J.a.Label,null,"Album Search"),r.a.createElement(J.a.Control,{type:"text",placeholder:"Search for an album name...",name:"searchInput",onChange:function(e){return m(e.target.value)}}),r.a.createElement(K.a,{variant:"secondary",type:"submit",className:"button py-2 my-3"},"Submit"))),r.a.createElement("div",null,t.length?t.map((function(e,a){return r.a.createElement(X.a,{key:a,style:{width:"18rem"}},r.a.createElement(X.a.Img,{variant:"top",src:e.cover}),r.a.createElement(X.a.Body,null,r.a.createElement(X.a.Title,null,e.name),r.a.createElement(X.a.Text,null,e.year)),r.a.createElement(z.a,{className:"list-group-flush"},r.a.createElement(M.a,null,e.artists.items.map((function(e){return e.name})))),r.a.createElement(X.a.Body,null,r.a.createElement(X.a.Link,{href:e.albumURI},"Check It Out on Spotify")))})):""))}function Z(){return r.a.createElement("div",null,"Footer")}var ee=Object(B.a)({uri:"/graphql"}),ae=Object(A.a)((function(e,a){var t=a.headers,n=localStorage.getItem("id_token");return{headers:Object(o.a)(Object(o.a)({},t),{},{authorization:n?"Bearer ".concat(n):""})}})),te=new P.a({link:ae.concat(ee),cache:new F.a});var ne=function(){return r.a.createElement(H.a,{client:te},r.a.createElement(p.a,null,r.a.createElement("div",{className:"App"},r.a.createElement("header",{className:"d-flex align-items-start justify-content-start"},r.a.createElement(k,null)),r.a.createElement("main",{className:"d-flex justify-content-start px-4"},r.a.createElement(U.d,null,r.a.createElement(U.b,{exact:!0,path:"/",component:R}),r.a.createElement(U.b,{exact:!0,path:"/login",component:_}),r.a.createElement(U.b,{exact:!0,path:"/signup",component:T}),r.a.createElement(U.b,{exact:!0,path:"/search",component:V}),r.a.createElement(U.b,{exact:!0,path:"/profile",component:Y}))))),r.a.createElement(Z,null))};l.a.render(r.a.createElement(r.a.StrictMode,null,r.a.createElement(ne,null)),document.getElementById("root"))},95:function(e,a,t){e.exports=t.p+"static/media/beethub.128365de.JPG"}},[[109,1,2]]]);
//# sourceMappingURL=main.81c49e89.chunk.js.map